<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:margin-top="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity">
<head th:replace="fragments/head :: head">
<body>
    <header th:replace="fragments/header :: nav"></header>
    <div class="container col-md-8" >
        <table class="table table-condensed table-striped table-light table-bordered">
            <thead class="thead-dark text-center ">
            <tr>
                <th scope="col" >ID</th>
                <th scope="col" >Nombre</th>
                <th scope="col" >Precio</th>
                <th scope="col" >Categoria</th>
                <th scope="col" sec:authorize="hasRole('ADMIN')">Editar/Eliminar</th>
            </tr>
            </thead>


            <tbody class="text-center tbody-clear">
            <tr th:each="prod : ${lista}" th:if="${prod.estado == true}" >

                <td th:text="${prod.id}">ID falso</td>
                <td th:text="${prod.nombre}">Nombre falso</td>
                <td th:text="${prod.precio}">precio falso</td>
                <td th:text="${prod.categoria.nombre}">categoria falsa</td>

                <td sec:authorize="hasRole('ADMIN')"> <a  th:href="@{/admin/edit/} + ${prod.id}" >Editar</a>/<button type="button" class="btn btn-outline-light text-dark" data-toggle="modal" th:attr="data-target='#recordDeleteModal'+${prod.id}">Delete</button>

                    <!-- Modal de confirmación delete -->
                    <div class="modal fade" th:attr="id='recordDeleteModal'+${prod.id}" tabindex="-1" role="dialog" aria-labelledby="recordDeleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="recordDeleteModalLabel">Confirmación</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    ¿Estas seguro que desea borrar este producto?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                                    <a href="newRecordForm.html" class="btn btn-primary" th:attr="href='/admin/delete/'+${prod.id}">Yes</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal end --> </td>

            </tr>
            </tbody>
        </table>
    </div>

    <div th:replace="fragments/jsScripts :: scripts"></div>
</body>
</html>